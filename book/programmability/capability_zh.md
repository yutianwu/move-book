# 模式：能力

在编程中，_能力_是一个令牌，它赋予所有者执行特定操作的权利。这是一种用于控制资源和操作访问的模式。能力的一个简单例子是门的钥匙。如果你有钥匙，你就可以开门。如果你没有钥匙，你就不能开门。一个更实际的例子是管理员能力，它允许所有者执行普通用户无法执行的管理操作。

## 能力是一个对象

在[Sui对象模型](./../object/)中，能力表示为对象。对象的所有者可以将此对象传递给函数以证明他们有权执行特定操作。由于严格的类型检查，接受能力作为参数的函数只能用正确的能力调用。

> 有一个约定是将能力命名为带有`Cap`后缀，例如`AdminCap`或`KioskOwnerCap`。

```move file=packages/samples/sources/programmability/capability.move anchor=main

```

## 使用`init`创建管理员能力

一个非常常见的做法是在包发布时创建一个单独的`AdminCap`对象。这样，应用程序可以有一个设置阶段，管理员账户在这个阶段准备应用程序的状态。

```move file=packages/samples/sources/programmability/capability-2.move anchor=admin_cap

```

## 地址检查 vs 能力

将对象用作能力是区块链编程中一个相对较新的概念。在其他智能合约语言中，授权通常通过检查发送者的地址来执行。这种模式在Sui上仍然可行，但是，总体建议是使用能力以获得更好的安全性、可发现性和代码组织。

让我们看看如果使用地址检查，创建用户的`new`函数会是什么样子：

```move file=packages/samples/sources/programmability/capability-3.move anchor=with_address

```

现在，让我们看看使用能力的相同函数会是什么样子：

```move file=packages/samples/sources/programmability/capability-4.move anchor=with_capability

```

使用能力相比地址检查有几个优势：

- 由于能力是对象，管理员权限的迁移更容易。在地址的情况下，如果管理员地址更改，所有检查地址的函数都需要更新 - 因此，需要包升级。
- 函数签名与能力更具描述性。很明显`new`函数需要`AdminCap`作为参数传递。没有它就无法调用此函数。
- 对象能力不需要在函数体中进行额外检查，因此减少了开发者错误的机会。
- 拥有的能力也有助于发现。AdminCap的所有者可以在他们的账户中看到对象（通过钱包或浏览器），并知道他们有管理员权限。这在地址检查中不太透明。

然而，地址方法有其自身的优势。例如，如果地址是多签名的，交易构建变得更复杂，检查地址可能更容易。此外，如果应用程序有一个在每个函数中都使用的中心对象，它可以存储管理员地址，这将简化迁移。中心对象方法对于可撤销能力也很有价值，管理员可以撤销用户的能力。